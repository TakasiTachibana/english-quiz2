<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ëã±ÂçòË™û„ÇØ„Ç§„Ç∫</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Meiryo', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
            gap: 10px;
        }
        .stats {
            display: flex;
            gap: 15px;
            font-size: 14px;
        }
        .stat-item {
            background: #f0f0f0;
            padding: 8px 15px;
            border-radius: 8px;
        }
        .question-box {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 15px;
            border-left: 4px solid #667eea;
        }
        .next-box {
            background: #fff3cd;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            font-size: 14px;
        }
        .choices {
            display: grid;
            gap: 10px;
            margin-bottom: 20px;
        }
        .choice-btn {
            padding: 15px;
            font-size: 16px;
            border: 2px solid #ddd;
            background: white;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.2s;
        }
        .choice-btn:hover:not(:disabled) {
            background: #f0f0f0;
            transform: translateY(-2px);
        }
        .choice-btn:disabled { cursor: not-allowed; opacity: 0.6; }
        .choice-btn.correct { background: #d4edda !important; border-color: #28a745; }
        .choice-btn.incorrect { background: #f8d7da !important; border-color: #dc3545; }
        .result-text {
            text-align: center;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            font-weight: bold;
        }
        .result-text.correct { background: #d4edda; color: #155724; }
        .result-text.incorrect { background: #f8d7da; color: #721c24; }
        .controls {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.2s;
        }
        .btn:hover { transform: translateY(-2px); }
        .btn-primary { background: #667eea; color: white; }
        .btn-secondary { background: #6c757d; color: white; }
        .progress-section {
            margin-bottom: 20px;
        }
        .progress-bar {
            width: 100%;
            height: 20px;
            background: #e9ecef;
            border-radius: 10px;
            overflow: hidden;
            margin-top: 5px;
        }
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea, #764ba2);
            transition: width 0.3s;
        }
        .combo-timer {
            height: 8px;
            background: #28a745;
            transition: width 0.1s linear;
        }
        .mistakes {
            background: #fff3cd;
            padding: 15px;
            border-radius: 10px;
            max-height: 200px;
            overflow-y: auto;
        }
        .mistakes h3 {
            margin-bottom: 10px;
            font-size: 16px;
        }
        .mistake-item {
            padding: 5px 0;
            border-bottom: 1px solid #ffc107;
            font-size: 14px;
        }
        input[type="number"] {
            padding: 8px;
            border: 2px solid #ddd;
            border-radius: 5px;
            width: 80px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üéØ Ëã±ÂçòË™û„ÇØ„Ç§„Ç∫</h1>
            <div class="stats">
                <div class="stat-item">Ê≠£Ëß£Êï∞: <span id="correct">0</span></div>
                <div class="stat-item">COMBO: <span id="combo">0</span></div>
                <div class="stat-item">MAX: <span id="maxCombo">0</span></div>
                <div class="stat-item">Lv.<span id="level">1</span></div>
            </div>
        </div>

        <div class="progress-section">
            <div style="display: flex; justify-content: space-between; font-size: 12px; margin-bottom: 3px;">
                <span>ÁµåÈ®ìÂÄ§</span>
                <span><span id="exp">0</span>/<span id="expNext">10</span></span>
            </div>
            <div class="progress-bar">
                <div class="progress-fill" id="expBar" style="width: 0%"></div>
            </div>
        </div>

        <div class="next-box" id="nextBox">Ê¨°„ÅÆÂïèÈ°å: ...</div>
        <div class="question-box" id="questionBox">ÂïèÈ°å: ...</div>
        
        <div id="resultText"></div>
        
        <div class="progress-bar" style="height: 8px; margin-bottom: 20px;">
            <div class="combo-timer" id="comboTimer" style="width: 100%"></div>
        </div>

        <div class="choices" id="choices"></div>

        <div class="controls">
            <button class="btn btn-primary" id="modeBtn">È†ÜÁï™/„É©„É≥„ÉÄ„É†</button>
            <input type="number" id="skipNum" value="10" min="1" max="100">
            <button class="btn btn-secondary" id="skipBtn">„Çπ„Ç≠„ÉÉ„Éó</button>
            <button class="btn btn-secondary" id="reviewBtn">Âæ©Áøí: OFF</button>
            <button class="btn btn-secondary" id="reverseBtn">Ëã±‚áîÊó•</button>
	    <button class="btn btn-secondary" id="clearMistakesBtn">‚ùå„É™„Çª„ÉÉ„Éà</button>
        </div>

        <div class="mistakes">
            <h3>‚ùå „Éü„Çπ„Åó„ÅüÂçòË™û</h3>
            <div id="mistakes"></div>
        </div>
    </div>

    <script>
        // „Çµ„É≥„Éó„É´ÂçòË™û„Éá„Éº„ÇøÔºàwords.txt„ÅÆ‰ª£„Çè„ÇäÔºâ
        const wordsData = [
           ['anyway', '„Å®„Å´„Åã„Åè'],
['following', '„Å´Á∂ö„ÅÑ„Å¶'],
['refer', 'ÂèÇÁÖß„Åó„Å¶'],
['available', 'ÂÖ•ÊâãÂèØËÉΩ'],
['department', 'ÈÉ®'],
['conference', '‰ºöË≠∞'],
['according to', '„Å´„Çà„Çã„Å®'],
['likely', '„Åä„Åù„Çâ„Åè'],
['offer', 'Áî≥„ÅóÂá∫„Å¶'],
['equipment', 'Ê©üÂô®'],
['provide', 'Êèê‰æõ„Åó„Å¶'],
['local', 'Âú∞ÂÖÉ„ÅÆ'],
['purchase', 'Ë≥ºÂÖ•„Åô„Çã'],
['opening', 'Á©∫„Åç'],
['construction', 'Âª∫Ë®≠'],
['tour', 'Ë¶ãÂ≠¶'],
['research', 'Ë™øÊüª'],
['attend', 'Âá∫Â∏≠'],
['delivery', 'ÈÖçÈÅî'],
['recently', 'ÊúÄËøë'],
['indicate', 'Á§∫„Åï„Çå„Å¶'],
['employee', 'ÂæìÊ•≠Âì°'],
['additional', 'ËøΩÂä†„ÅÆ'],
['survey', '„Ç¢„É≥„Ç±„Éº„ÉàË™øÊüª'],
['review', 'ÁõÆ„ÇíÈÄö„Åô'],
['production', 'ÁîüÁî£'],
['located', 'Â†¥ÊâÄ„Å´„ÅÇ„Çã'],
['detail', 'Ë©≥Á¥∞'],
['announce', 'Áô∫Ë°®„Åô„Çã'],
['repair', '‰øÆÁêÜ'],
['increse', 'Â¢óÂä†'],
['include', 'Âê´„Åæ„Çå„Å¶'],
['currently', 'ÁèæÂú®'],
['advertising', 'Â∫ÉÂëä'],
['charge', 'Ë´ãÊ±Ç„Åó„Åæ„Åô'],
['expect', '‰∫àÂÆö'],
['firm', '‰ºöÁ§æ'],
['client', 'È°ßÂÆ¢'],
['financial', '„ÅäÈáë„ÅÆ'],
['annual', 'Âπ¥Ê¨°'],
['payment', 'ÊîØÊâï„ÅÑ'],
['budget', '‰∫àÁÆó'],
['applicarion', 'ÂøúÂãüÊõ∏È°û'],
['contract', 'Â•ëÁ¥Ñ'],
['management', 'ÁµåÂñ∂'],
['performance', 'ÊàêÁ∏æ'],
['pleased', 'Ê∫ÄË∂≥„Åó„Å¶'],
['confirm', 'Á¢∫Ë™ç„Åô„Çã'],
['award', 'ÊéàË≥û'],
['clothing', 'Ë°£ÊñôÂìÅ'],
['display', 'Â±ïÁ§∫„Åô„Çã'],
['candidate', 'ÂÄôË£úËÄÖ'],
['state', 'Ëø∞„Åπ„Çã'],
['exhibit', 'Â±ïÁ§∫Áâ©'],
['session', 'ÊôÇÈñì'],
['note', 'Ê≥®ÊÑè„Åô„Çã'],
['process', 'Âá¶ÁêÜ„Åô„Çã'],
['instruction', 'Ë™¨ÊòéÊõ∏'],
['membership', '‰ºöÂì°'],
['agency', '‰ª£ÁêÜÂ∫ó'],
['based', 'Êã†ÁÇπ„ÇíÁΩÆ„Åè'],
['facility', 'ÊñΩË®≠'],
['advance', '‰∫ãÂâç„ÅÆ'],
['committee', 'ÂßîÂì°‰ºö'],
['successful', 'ÊàêÂäü„Åó„Åü'],
['excellent', 'Á¥†Êô¥„Çâ„Åó„ÅÑ'],
['industry', 'Ê•≠Áïå'],
['fee', 'ÊñôÈáë'],
['accept', 'Âèó„ÅëÂÖ•„Çå„Çã'],
['upcoming', '‰ªäÂ∫¶„ÅÆ'],
['latest', 'ÊúÄÊñ∞„ÅÆ'],
['submit', 'ÊèêÂá∫„Åô„Çã'],
['transportation', '‰∫§ÈÄöÊ©üÈñ¢'],
['r√©sum√©', 'Â±•Ê≠¥Êõ∏'],
['executive', 'ÈáçÂΩπ'],
['introduce', 'Â∞éÂÖ•„Åô„Çã'],
['previous', '‰ª•Ââç„ÅÆ'],
['proposal', 'ÊèêÊ°à'],
['supply', 'Áî®ÂìÅ'],
['enclose', 'ÂêåÂ∞Å„Åô„Çã'],
['policy', 'Ë¶èÂÆö'],
['register', 'ÁôªÈå≤„Åô„Çã'],
['arrange', 'ÊâãÈÖç„Åô„Çã'],
['bill', 'Ë´ãÊ±ÇÊõ∏'],
['hire', 'Èõá„ÅÜ'],
['approve', 'ÊâøË™ç„Åô„Çã'],
['conduct', 'Ë°å„ÅÜ'],
['opportunity', 'Ê©ü‰ºö'],
['deadline', 'Á∑†„ÇÅÂàá„Çä'],
['corporate', '‰ºÅÊ•≠„ÅÆ'],
['warranty', '‰øùË®º'],
['necessary', 'ÂøÖË¶Å„Å™'],
['reserve', '‰∫àÁ¥Ñ„Åô„Çã'],
['resident', '‰ΩèÊ∞ë'],
['create', '‰Ωú„ÇäÂá∫„Åô'],
['inform', 'Áü•„Çâ„Åõ„Çã'],
['allow', 'ÂèØËÉΩ„Å´„Åô„Çã'],
['mention', 'Ëø∞„Åπ„Çã'],
['appreciate', 'ÊÑüË¨ù„Åô„Çã'],
['replacement', '‰∫§Êèõ'],
['update', 'ÊúÄÊñ∞ÊÉÖÂ†±'],
['branch', 'ÊîØÂ∫ó'],
['paid', 'ÊúâÁµ¶„ÅÆ'],
['unfortunately', 'ÊÆãÂøµ„Å™„Åå„Çâ'],
['original', 'ÂÖÉ„ÅÆ'],
['rent', 'ÂÆ∂Ë≥É'],
['memo', 'Á§æÂÜÖÊñáÊõ∏'],
['luggage', 'ÊóÖË°å„Åã„Å∞„Çì'],
['editor', 'Á∑®ÈõÜËÄÖ'],
['exhibition', 'Â±ïÁ§∫‰ºö'],
['leading', '„Éà„ÉÉ„Éó„ÅÆ'],
['organization', 'ÁµÑÁπî'],
['release', 'Áô∫Â£≤„Åô„Çã'],
['limited', 'ÈôêÂÆö„ÅÆ'],
['procedure', 'ÊâãÁ∂ö„Åç'],
['experienced', 'ÁµåÈ®ìË±ä„Åã„Å™'],
['personnel', 'Á§æÂì°'],
['author', 'ËëóËÄÖ'],
['benefit', 'Á¶èÂà©ÂéöÁîü'],
['focus', 'ÈõÜ‰∏≠„Åô„Çã'],
['participate', 'ÂèÇÂä†„Åô„Çã'],
['cause', 'ÂéüÂõ†'],
['degree', 'Â≠¶‰Ωç'],
['directly', 'Áõ¥Êé•'],
['host', 'Âè∏‰ºöËÄÖ'],
['expert', 'Â∞ÇÈñÄÂÆ∂'],
['impress', 'ÊÑüÂøÉ„Åï„Åõ„Çã'],
['mainly', '‰∏ª„Å´'],
['suggestion', 'ÊèêÊ°à'],
['supplier', 'Á¥çÂÖ•Ê•≠ËÄÖ'],
['document', 'Êõ∏È°û'],
['remind', 'ÂÜçÁ¢∫Ë™ç„Åô„Çã'],
['require', 'Ê±Ç„ÇÅ„Çã'],
['representative', 'ÊãÖÂΩìËÄÖ'],
['packaging', 'Ê¢±ÂåÖ'],
['description', 'Ë™¨Êòé'],
['property', '‰∏çÂãïÁî£'],
['extension', 'ÂÜÖÁ∑ö'],
['inquire', 'Âïè„ÅÑÂêà„Çè„Åõ„Çã'],
['merchandise', 'ÂïÜÂìÅ'],
['highly', 'ÈùûÂ∏∏„Å´'],
['result', 'ÁµêÊûú'],
['assistance', 'ÊîØÊè¥'],
['encourage', 'Â•®Âä±„Åô„Çã'],
['individual', 'ÂÄã‰∫∫'],
['laboratory', 'Á†îÁ©∂ÊâÄ'],
['consider', 'Ê§úË®é„Åô„Çã'],
['headquarters', 'Êú¨Á§æ'],
['ship', 'Âá∫Ëç∑„Åô„Çã'],
['commercial', 'ÂïÜÊ•≠„ÅÆ'],
['device', 'Ê©üÂô®'],
['intended', 'Âêë„Åë„Çâ„Çå„Åü'],
['brochure', '„Éë„É≥„Éï„É¨„ÉÉ„Éà'],
['mail', 'ÈÉµ‰æø'],
['prefer', 'Â•Ω„ÇÄ'],
['response', 'ËøîÁ≠î'],
['region', 'Âú∞Âüü'],
['donation', 'ÂØÑ‰ªò'],
['quarter', 'ÂõõÂçäÊúü'],
['agreement', 'Â•ëÁ¥ÑÊõ∏'],
['journal', 'Â∞ÇÈñÄË™å'],
['distribute', 'ÈÖçÂ∏É„Åô„Çã'],
['potential', 'Ë¶ãËæº„Åø„Åå„ÅÇ„Çã'],
['reschedule', '‰∫àÂÆöÂ§âÊõ¥„Åô„Çã'],
['renew', 'Êõ¥Êñ∞„Åô„Çã'],
['warehouse', 'ÂÄâÂ∫´'],
['refund', 'ËøîÈáë'],
['advise', 'Âãß„ÇÅ„Çã'],
['immediately', '„Åô„Åê„Å´'],
['council', 'Ë≠∞‰ºö'],
['broadcast', 'ÊîæÈÄÅ„Åô„Çã'],
['responsible', 'ÊãÖÂΩì„Åó„Å¶'],
['avoid', 'ÈÅø„Åë„Çã'],
['effective', 'ÂäπÊûúÁöÑ„Å™'],
['invitation', 'ÊãõÂæÖÁä∂'],
['reduce', 'ÔºàÂÄ§ÊÆµ„ÇíÔºâ‰∏ã„Åí„Çã'],
['vehicle', '‰πó„ÇäÁâ©'],
['efficient', 'ÂäπÁéáÁöÑ„Å™'],
['manufacturer', '„É°„Éº„Ç´„Éº'],
['comfortable', 'Âø´ÈÅ©„Å™'],
['correct', 'Ê≠£„Åó„ÅÑ'],
['downtown', '‰∏≠ÂøÉË°ó'],
['method', 'ÊñπÊ≥ï'],
['entire', 'ÂÖ®‰Ωì„ÅÆ'],
['range', 'ÁØÑÂõ≤'],
['setting', 'Áí∞Â¢É'],
['apologize', '„Åä„Çè„Å≥„Åô„Çã'],
['frequent', 'È†ªÁπÅ„Å™'],
['promotion', 'ÊòáÈÄ≤'],
['regarding', '„Å´Èñ¢„Åó„Å¶'],
['temporary', 'Ëá®ÊôÇ'],
['traditional', '‰ºùÁµ±ÁöÑ„Å™'],
['admission', 'ÂÖ•Â†¥'],
['fit', 'ÂÖ•„Çã'],
['reference', 'ÁÖß‰ºöÂÖà'],
['status', 'Áä∂Ê≥Å'],
['fuel', 'ÁáÉÊñô'],
['nearly', 'Ëøë„Åè'],
['cafeteria', 'Á§æÂì°È£üÂ†Ç'],
['determine', 'Ê±∫ÂÆö„Åô„Çã'],
['expense', 'ÁµåË≤ª'],
['overseas', 'Êµ∑Â§ñ'],
['satisfied', 'Ê∫ÄË∂≥„Åó„Åü'],
['appear', 'Êé≤Ëºâ„Åï„Çå„Çã'],
['develop', '‰Ωú„ÇäÂá∫„Åô'],
['improve', 'ÊîπÂñÑ„Åô„Çã'],
['reasonable', 'Êâã„Åî„Çç„Å™'],
['unable', '„Åß„Åç„Å™„ÅÑ'],
['delay', 'ÈÅÖ„Çå„Çã'],
['legal', 'Ê≥ïÂæã„Å´Èñ¢„Åô„Çã'],
['regulation', 'Ë¶èÂà∂'],
['expand', 'Êã°Â§ß„Åô„Çã'],
['launch', 'Áô∫Â£≤'],
['recommendation', 'Êé®Ëñ¶'],
['direct', 'Âêë„Åë„Çã'],
['profit', 'Âà©Áõä'],
['seek', 'ÂãüÈõÜ„Åô„Çã'],
['entry', '„Ç®„É≥„Éà„É™„Éº‰ΩúÂìÅ'],
['claim', 'Áî≥„ÅóÁ´ã„Å¶'],
['crew', 'Áè≠'],
['demand', 'ÈúÄË¶Å'],
['figure', 'Êï∞Â≠ó'],
['raise', 'ÈõÜ„ÇÅ„Çã'],
['attach', 'Ê∑ª‰ªò„Åô„Çã'],
['attract', 'Âºï„Åç‰ªò„Åë„Çã'],
['insurance', '‰øùÈô∫'],
['departure', 'Âá∫Áô∫'],
['mayor', 'Áî∫Èï∑'],
['balance', 'ÊÆãÈ´ò'],
['estimate', 'Ë¶ãÁ©ç„ÇÇ„Çä'],
['district', 'Âú∞Âå∫'],
['former', '„Åã„Å§„Å¶„ÅÆ'],
['modern', 'Ëøë‰ª£ÁöÑ„Å™'],
['tip', '„Ç≥„ÉÑ'],
['establish', 'Ë®≠Á´ã„Åô„Çã'],
['option', 'ÈÅ∏ÊäûËÇ¢'],
['retire', 'ÈÄÄËÅ∑„Åô„Çã'],
['search', 'Êé¢„Åô'],
['specific', 'ÂÖ∑‰ΩìÁöÑ„Å™'],
['agricultural', 'Ëæ≤Ê•≠„ÅÆ'],
['historical', 'Ê≠¥Âè≤‰∏ä„ÅÆ'],
['helpful', 'ÂΩπ„Å´Á´ã„Å§'],
['complaint', 'Ëã¶ÊÉÖ'],
['related', 'Èñ¢ÈÄ£'],
['simply', 'ÂçòÁ¥î„Å´'],
['unique', 'Áã¨Ëá™„ÅÆ'],
['concerning', 'Èñ¢„Åó„Å¶'],
['reputation', 'Ë©ïÂà§'],
['ability', 'ËÉΩÂäõ'],
['arrival', 'Âà∞ÁùÄ'],
['familiar', '„Çà„ÅèÁü•„Å£„Å¶„ÅÑ„Çã'],
['ideal', 'ÁêÜÊÉ≥ÁöÑ„Å™'],
['maintain', 'Á∂≠ÊåÅ„Åô„Çã'],
['landscaping', 'ÈÄ†Âúí'],
['organize', 'Âèñ„Çä„Åæ„Å®„ÇÅ„Çã'],
['significant', '„Åã„Å™„Çä„ÅÆ'],
['occasion', 'Ë°å‰∫ã'],
['standard', 'Âü∫Ê∫ñ'],
['background', 'ÁµåÊ≠¥ÔºåËÉåÊôØ'],
['guided', '„Ç¨„Ç§„Éâ‰ªò„Åç„ÅÆ'],
['advanced', 'ÂÖàÁ´Ø„ÅÆ'],
['alternative', '‰ª£„Çè„Çä„ÅÆ'],
['confident', 'Ëá™‰ø°„Åå„ÅÇ„Çã'],
['decade', '10Âπ¥Èñì'],
['initial', 'ÊúÄÂàù„ÅÆ'],
['separate', 'ÂàÜ„Åë„Çã'],
['celebration', '„ÅäÁ•ù„ÅÑ'],
['concern', 'Êá∏Âøµ'],
['environment', 'Áí∞Â¢É'],
['operate', 'Êìç‰Ωú„Åô„Çã'],
['various', '„Åï„Åæ„Åñ„Åæ„Å™'],
['brief', 'Áü≠„ÅÑ'],
['full-time', 'Â∏∏Âã§„ÅÆ'],
['overall', 'ÂÖ®‰Ωì„ÅÆ'],
['achieve', 'ÈÅîÊàê„Åô„Çã'],
['basis', 'Âü∫Á§é'],
['complex', 'Ë§áÂêàÊñΩË®≠'],
['delighted', 'Âñú„Çì„Åß„ÅÑ„Çã'],
['obtain', 'Âæó„Çã'],
['honor', 'Áß∞„Åà„Çã'],
['properly', '„Åç„Å°„Çì„Å®'],
['suitable', 'ÈÅ©„Åó„Åü'],
['electronic', 'ÈõªÂ≠ê'],
['finalize', 'Âèñ„Çä„Åæ„Å®„ÇÅ„Çã'],
['generous', 'ÂØõÂ§ß„Å™'],
['preparation', 'Ê∫ñÂÇô'],
['duty', '‰ªªÂãô'],
['earn', 'Âæó„Çã'],
['willing', 'ÊÑèÊÄù„Åå„ÅÇ„Çã'],
['worth', '‰æ°ÂÄ§„Åå„ÅÇ„Çã'],
['fund', 'Ë≥áÈáëÊèê‰æõ„Åô„Çã'],
['overnight', 'ÁøåÊó•„ÅÆ'],
['particularly', 'Áâπ„Å´'],
['aspect', 'Èù¢'],
['hesitate', 'ÈÅ†ÊÖÆ„Åô„Çã'],
['involved', 'Èñ¢„Çè„Å£„Å¶'],
['regularly', 'ÂÆöÊúüÁöÑ„Å´'],
['scholarship', 'Â•®Â≠¶Èáë'],
['shortly', '„Åæ„ÇÇ„Å™„Åè'],
['automobile', 'Ëá™ÂãïËªä'],
['deposit', '‰øùË®ºÈáë'],
['contain', 'Âê´„ÇÄ'],
['content', 'ÂÜÖÂÆπ'],
['proof', 'Ë®ºÊòé'],
['affect', 'ÂΩ±Èüø„Åô„Çã'],
['recognize', 'Ë™ç„ÇÅ„Çã'],
['represent', '‰ª£Ë°®„Åô„Çã'],
['transfer', 'Ëª¢Âã§„Åô„Çã'],
['anniversary', 'Ë®òÂøµÊó•'],
['automatically', 'Ëá™ÂãïÁöÑ„Å´'],
['capacity', 'ËÉΩÂäõÔºåÂΩπÂâ≤'],
['destination', 'ÁõÆÁöÑÂú∞'],
['grant', 'Ë£úÂä©Èáë'],
['publish', 'Âá∫Áâà„Åô„Çã'],
['accompany', '‰ªò„ÅÑ„Å¶„Åè„Çã'],
['economic', 'ÁµåÊ∏à„ÅÆ'],
['extremely', 'ÈùûÂ∏∏„Å´'],
['institution', 'Ê©üÈñ¢'],
['accurate', 'Ê≠£Á¢∫„Å™'],
['compete', 'Á´∂„ÅÜ'],
['emphasize', 'Âº∑Ë™ø„Åô„Çã'],
['aware', 'Ê∞ó‰ªò„ÅÑ„Å¶„ÅÑ„Çã'],
['crowded', 'Ê∑∑Èõë„Åó„Å¶„ÅÑ„Çã'],
['praise', 'Ë§í„ÇÅ„Çã'],
['valuable', 'Ë≤¥Èáç„Å™'],
['explore', 'Êé¢„Çã'],
['found', 'Ë®≠Á´ã„Åô„Çã'],
['function', 'Ê©üËÉΩ'],
['impact', 'ÂΩ±Èüø'],
['amazing', 'È©ö„Åè„Åπ„Åç'],
['assure', '‰øùË®º„Åô„Çã'],
['cooperation', 'ÂçîÂäõ'],
['popularity', '‰∫∫Ê∞ó'],
['permit', 'Ë®±ÂèØË®º'],
['solve', 'Ëß£Ê±∫„Åô„Çã'],
['vote', 'ÊäïÁ•®„Åô„Çã'],
['crop', '‰ΩúÁâ©'],
['neighborhood', 'ËøëÊâÄ'],
['permanent', 'Â∏∏Ë®≠„ÅÆ'],
['regret', 'ÊÆãÂøµ„Å´ÊÄù„ÅÜ'],
['slightly', '„Çè„Åö„Åã„Å´'],
['complicated', 'Ë§áÈõë„Å™'],
['factor', 'Ë¶ÅÂõ†'],
['favorable', 'Â•ΩÊÑèÁöÑ„Å™'],
['guarantee', '‰øùË®º„Åô„Çã'],
['mechanical', 'Ê©üÊ¢∞„ÅÆ'],
['priority', 'ÂÑ™ÂÖàÈ†Ü‰Ωç'],
['relatively', 'ÊØîËºÉÁöÑ'],
['resource', 'Ë≥áÊ∫ê'],
['shuttle', 'ÈÄÅËøé„Éê„Çπ'],
['divide', 'ÂàÜ„Åë„Çã'],
['native', 'Âá∫Ë∫´„ÅÆ'],
['afford', '‰ΩôË£ï„Åå„ÅÇ„Çã'],
['income', 'ÂèéÂÖ•'],
['occur', 'Áô∫Áîü„Åô„Çã'],
['saving', 'ÂÄ§Âºï„Åç'],
['findings', 'Ë™øÊüªÁµêÊûú'],
['locate', 'Ë¶ã„Å§„Åë„Çã'],
['postpone', 'Âª∂Êúü„Åô„Çã'],
['preserve', '‰øùÂ≠ò„Åô„Çã'],
['prove', 'Ë®ºÊòé„Åô„Çã'],
['exact', 'Ê≠£Á¢∫„Å™'],
['gain', 'Âæó„Çã'],
['labor', 'Âä¥ÂÉç'],
['regard', 'Ë¶ã„Å™„Åô'],
['closely', 'ÂØÜÊé•„Å´'],
['deserve', 'ÂÄ§„Åô„Çã'],
['identify', 'ÁâπÂÆö„Åô„Çã'],
['loyal', 'Â∏∏ÈÄ£„ÅÆ'],
['promising', 'ÊúâÊúõ„Å™'],
['stress', 'Âº∑Ë™ø„Åô„Çã'],
['analyze', 'ÂàÜÊûê„Åô„Çã'],
['commission', 'ÂßîË®ó„Åô„Çã'],
['committed', 'ÁÜ±ÂøÉ„Å´Âèñ„ÇäÁµÑ„ÇÄ'],
['comparison', 'ÊØîËºÉ'],
['component', 'ÈÉ®ÂìÅ'],
['enable', 'ÂèØËÉΩ„Å´„Åô„Çã'],
['enjoyable', 'Ê•Ω„Åó„ÅÑ'],
['existing', 'ÂæìÊù•„ÅÆ'],
['flyer', '„ÉÅ„É©„Ç∑'],
['proceed', 'ÈÄ≤„ÇÄ'],
['prevent', 'Â¶®„Åí„Çã'],
['alike', 'ÂêåÊßò„Å´'],
['appoint', '‰ªªÂëΩ„Åô„Çã'],
['connection', 'Êé•Á∂ö'],
['eager', 'ÁÜ±Êúõ„Åó„Å¶'],
['ease', 'ÂÆπÊòì„Åï'],
['fairly', '„Åã„Å™„Çä'],
['absolutely', 'ÂÆåÂÖ®„Å´'],
['atmosphere', 'Èõ∞Âõ≤Ê∞ó'],
['calculate', 'Ë®àÁÆó„Åô„Çã'],
['contrast', 'ÂØæÁÖß'],
['monitor', 'Áõ£Ë¶ñ„Åô„Çã'],
['occasionally', 'ÊôÇ„ÄÖ'],
['practical', 'ÂÆüÂãô„ÅÆ'],
['serious', 'ÈáçÂ§ß„Å™'],
['strength', 'Âº∑Â∫¶'],
['equally', 'Âêå„Åò„Åè„Çâ„ÅÑ„Å´'],
['import', 'Ëº∏ÂÖ•ÂìÅ'],
['informal', 'ÈùûÂÖ¨Âºè„ÅÆ'],
        ];

        let words = wordsData.map(([jp, en]) => ({jp, en}));
        let currentIndex = 0;
        let sequentialMode = false;
        let reverseMode = false;
        let persistentReview = false;
        let inReviewPhase = false;
        let reviewProgress = 0;
        let reviewBlockStart = -1;
        let resumeIndex = 0;

        let correctCount = 0;
        let combo = 0;
        let maxCombo = 0;
        let level = 1;
        let exp = 0;
        let expToNext = 10;

        let comboTimeLimit = 3500;
        let comboRemaining = 0;
        let comboInterval = null;

        let currentWord, currentAnswer, nextWord, nextAnswer;
        let previousWord = '';

        function init() {
            generateQuestion();
            generateNextQuestion();
            updateDisplay();
            setupButtons();
        }

        function generateQuestion() {
            if (sequentialMode) return;
            let idx;
            do {
                idx = Math.floor(Math.random() * words.length);
            } while (words.length > 1 && getQuestion(idx) === previousWord);
            
            currentWord = getQuestion(idx);
            currentAnswer = getAnswer(idx);
            previousWord = currentWord;
        }

        function generateNextQuestion() {
            if (sequentialMode) return;
            let idx = Math.floor(Math.random() * words.length);
            nextWord = getQuestion(idx);
            nextAnswer = getAnswer(idx);
        }

        function getQuestion(idx) {
            return reverseMode ? words[idx].en : words[idx].jp;
        }

        function getAnswer(idx) {
            return reverseMode ? words[idx].jp : words[idx].en;
        }

        function showByIndex(showIdx, nextIdx) {
            if (showIdx >= 0 && showIdx < words.length) {
                currentWord = getQuestion(showIdx);
                currentAnswer = getAnswer(showIdx);
            }
            if (nextIdx >= 0 && nextIdx < words.length) {
                nextWord = getQuestion(nextIdx);
            }
            updateDisplay();
        }

        function updateDisplay() {
            document.getElementById('questionBox').textContent = 
                sequentialMode ? `ÂïèÈ°å (${currentIndex + 1}Áï™ÁõÆ): ${currentWord}` : `ÂïèÈ°å: ${currentWord}`;
            document.getElementById('nextBox').textContent = 
                sequentialMode ? `Ê¨°„ÅÆÂïèÈ°å (${currentIndex + 2}Áï™ÁõÆ): ${nextWord}` : `Ê¨°„ÅÆÂïèÈ°å: ${nextWord}`;
            
            generateChoices();
            
            document.getElementById('correct').textContent = correctCount;
            document.getElementById('combo').textContent = combo;
            document.getElementById('maxCombo').textContent = maxCombo;
            document.getElementById('level').textContent = level;
            document.getElementById('exp').textContent = exp;
            document.getElementById('expNext').textContent = expToNext;
            document.getElementById('expBar').style.width = `${(exp / expToNext) * 100}%`;
        }

        function generateChoices() {
            const answers = reverseMode 
                ? words.map(w => w.jp) 
                : words.map(w => w.en);
            
            let choices = [currentAnswer];
            while (choices.length < 4 && answers.length > 0) {
                const ans = answers[Math.floor(Math.random() * answers.length)];
                if (!choices.includes(ans)) choices.push(ans);
            }
            
            choices.sort(() => Math.random() - 0.5);
            
            const container = document.getElementById('choices');
            container.innerHTML = '';
            choices.forEach(choice => {
                const btn = document.createElement('button');
                btn.className = 'choice-btn';
                btn.textContent = choice;
                btn.onclick = () => checkAnswer(btn, choice);
                container.appendChild(btn);
            });
        }

        function checkAnswer(btn, choice) {
            const buttons = document.querySelectorAll('.choice-btn');
            buttons.forEach(b => b.disabled = true);
            
            const isCorrect = choice === currentAnswer;
            const resultDiv = document.getElementById('resultText');
            
            if (isCorrect) {
                btn.classList.add('correct');
                resultDiv.textContent = 'Ê≠£Ëß£ÔºÅ';
                resultDiv.className = 'result-text correct';
                correctCount++;
                
                combo++;
                if (combo > maxCombo) maxCombo = combo;
                
                exp++;
                if (exp >= expToNext) {
                    exp -= expToNext;
                    level++;
                    expToNext += 5;
                }
                
                startComboTimer();
            } else {
                btn.classList.add('incorrect');
                buttons.forEach(b => {
                    if (b.textContent === currentAnswer) b.classList.add('correct');
                });
                resultDiv.textContent = `‰∏çÊ≠£Ëß£... Ê≠£Ëß£„ÅØ: ${currentAnswer}`;
                resultDiv.className = 'result-text incorrect';
                
                addMistake();
                combo = 0;
                stopComboTimer();
            }
            
            updateDisplay();
            setTimeout(nextQuestion, 800);
        }

        function nextQuestion() {
            document.getElementById('resultText').textContent = '';
            const buttons = document.querySelectorAll('.choice-btn');
            buttons.forEach(b => {
                b.disabled = false;
                b.className = 'choice-btn';
            });
            
            if (sequentialMode) {
                if (persistentReview && inReviewPhase) {
                    let showIdx = reviewBlockStart + reviewProgress;
                    reviewProgress++;
                    
                    if (reviewProgress < 10) {
                        showByIndex(showIdx, reviewBlockStart + reviewProgress);
                    } else {
                        inReviewPhase = false;
                        currentIndex = resumeIndex;
                        showByIndex(currentIndex, currentIndex + 1);
                    }
                } else {
                    currentIndex++;
                    
                    if (persistentReview && (currentIndex % 10 === 0) && (currentIndex >= 20)) {
                        reviewBlockStart = currentIndex - 20;
                        reviewProgress = 0;
                        resumeIndex = currentIndex;
                        inReviewPhase = true;
                        showByIndex(currentIndex - 1, reviewBlockStart);
                    } else {
                        showByIndex(currentIndex, currentIndex + 1);
                    }
                }
            } else {
                currentWord = nextWord;
                currentAnswer = nextAnswer;
                generateNextQuestion();
                updateDisplay();
            }
        }

        function addMistake() {
            const div = document.createElement('div');
            div.className = 'mistake-item';
            div.textContent = reverseMode 
                ? `${currentAnswer} : ${currentWord}` 
                : `${currentWord} : ${currentAnswer}`;
            document.getElementById('mistakes').insertBefore(div, document.getElementById('mistakes').firstChild);
        }

        function startComboTimer() {
            stopComboTimer();
            comboRemaining = comboTimeLimit;
            document.getElementById('comboTimer').style.width = '100%';
            
            comboInterval = setInterval(() => {
                comboRemaining -= 100;
                if (comboRemaining <= 0) {
                    combo = 0;
                    stopComboTimer();
                    updateDisplay();
                } else {
                    document.getElementById('comboTimer').style.width = 
                        `${(comboRemaining / comboTimeLimit) * 100}%`;
                }
            }, 100);
        }

        function stopComboTimer() {
            if (comboInterval) {
                clearInterval(comboInterval);
                comboInterval = null;
            }
            document.getElementById('comboTimer').style.width = '0%';
        }

        function setupButtons() {
            document.getElementById('modeBtn').onclick = () => {
                sequentialMode = !sequentialMode;
                if (sequentialMode) {
                    currentIndex = 0;
                    inReviewPhase = false;
                    showByIndex(0, 1);
                } else {
                    generateQuestion();
                    generateNextQuestion();
                    updateDisplay();
                }
            };

function resetAll() {
    // „Çø„Ç§„Éû„ÉºÂÅúÊ≠¢
    stopComboTimer();

    // Áä∂ÊÖã„ÇíÂàùÊúüÂÄ§„Å∏Êàª„Åô
    sequentialMode = false;
    reverseMode = false;
    persistentReview = false;
    inReviewPhase = false;
    reviewProgress = 0;
    reviewBlockStart = -1;
    resumeIndex = 0;
    previousWord = '';

    correctCount = 0;
    combo = 0;
    maxCombo = 0;
    level = 1;
    exp = 0;
    expToNext = 10;

    // currentIndex „ÇíÂÖàÈ†≠„Å´Êàª„Åó„Å¶Êñ∞„Åó„ÅÑÂïèÈ°å„ÇíÁî®ÊÑè
    currentIndex = 0;
    generateQuestion();
    generateNextQuestion();

    // „Éü„Çπ‰∏ÄË¶ß„Çí„ÇØ„É™„Ç¢
    const mistakesContainer = document.getElementById('mistakes');
    mistakesContainer.innerHTML = '';

    // ÁµêÊûú„ÉÜ„Ç≠„Çπ„Éà„ÇíÁ©∫„Å´
    const resultDiv = document.getElementById('resultText');
    resultDiv.textContent = '';
    resultDiv.className = '';

    // UIÊõ¥Êñ∞
    updateDisplay();
}

document.getElementById('clearMistakesBtn').onclick = function() {
    // Á¢∫Ë™ç„ÉÄ„Ç§„Ç¢„É≠„Ç∞Ôºà‰∏çË¶Å„Å™„ÇâÂâäÈô§Ôºâ
    if (!confirm('Êú¨ÂΩì„Å´ÂÖ®„Å¶„É™„Çª„ÉÉ„Éà„Åó„Åæ„Åô„ÅãÔºüÔºà„Çπ„Ç≥„Ç¢„Éª„Ç≥„É≥„Éú„Éª„Éü„Çπ‰∏ÄË¶ß„ÅåÊ∂à„Åà„Åæ„ÅôÔºâ')) return;

    resetAll();

    // „ÇÇ„Åó localStorage „Å´Áä∂ÊÖã„Çí‰øùÂ≠ò„Åó„Å¶„ÅÑ„Çã„Å™„Çâ„Åì„Åì„ÅßÊ∂à„ÅôÔºà„ÅÇ„Çå„Å∞Ôºâ
    // localStorage.removeItem('quizState');
};
            document.getElementById('skipBtn').onclick = () => {
                if (!sequentialMode) return alert('È†ÜÁï™„É¢„Éº„Éâ„Åß„ÅÆ„Åø‰ΩøÁî®„Åß„Åç„Åæ„Åô');
                const skipCount = parseInt(document.getElementById('skipNum').value);
                currentIndex += skipCount;
                showByIndex(currentIndex, currentIndex + 1);
            };

            document.getElementById('reviewBtn').onclick = function() {
                persistentReview = !persistentReview;
                this.textContent = persistentReview ? 'Âæ©Áøí: ON' : 'Âæ©Áøí: OFF';
            };

            document.getElementById('reverseBtn').onclick = () => {
                reverseMode = !reverseMode;
                if (sequentialMode) {
                    showByIndex(currentIndex, currentIndex + 1);
                } else {
                    generateQuestion();
                    generateNextQuestion();
                    updateDisplay();
                }
            };
        }


        init();
    </script>
</body>
</html>